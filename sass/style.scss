@import 'ibm-colors';

// $background: #fdfdfd !default;
// $color: #323232 !default;
$accent: (
  light: color('purple', 20),
  neutral: color('purple', 50),
  dark: color('purple', 80)
);
// $transition: all .35s cubic-bezier(.77, .1, .22, 1) !default;
// $font-sizes: 1.618em 1em .618em !default;
$grey: #f9f9f9;
$worklets: #f4b766;
$typed: #44a384;
$props: #af499c;
$paint: #784ca5;
$layout: #2e3561;
$animation: #cbe961;
$black: #272822;

@import 'stage-fright/stage-fright';
@import 'stage-fright/stage-fright--styles';
// @import 'stage-fright/stage-fright--minimap';
@import 'stage-fright/stage-fright--progress-bar';
@import 'editor';
@import 'repl';
@import 'animation';

a {
  color: map-get($accent, 'neutral');
}

.btns--btn {
  fill: $grey;
}

:root {
  font-size: 150%;
  #{--sf-transition}: none;
}

.minimap {
  #{--minimap-highlight}: map-get($accent, 'light');
  #{--minimap-fragments}: map-get($accent, 'neutral');
  #{--minimap-dark}: map-get($accent, 'dark');
  #{--minimap-light}: map-get($accent, 'light');
}

pre[class*='language-'] {
  height: auto;
}

.font--PlexSans {
  font-family: 'IBM Plex Sans', sans-serif;
}

*,
li,
h1,
h2,
h3,
h4,
h5,
p {
  line-height: 1.25;
}

h1,
h2,
h3,
h4,
h5 {
  margin-bottom: 0.368em; // 1.618 - 1.25 for ++ spacing after a header
}

a,
a:hover {
  background-position: 0 1.2em;
}

p + p,
ul + p {
  margin-top: 1.25rem;
}

pre[class*='language-']:not(.editor--pre), // sass-lint:disable-line force-attribute-nesting, no-qualifying-elements
code[class*='language-']:not(.editor--code) {
  // sass-lint:disable-line force-attribute-nesting, no-qualifying-elements
  font-size: 1.1rem !important; // sass-lint:disable-line no-important
  line-height: 1.25 !important; // sass-lint:disable-line no-important
}

.nope,
.kinda {
  position: absolute;
  z-index: 100;
  top: 50%;
  left: 50%;
  font-size: calc(3em + 5vw);
  color: color('red', 50);
  padding: 0.2em 0.8em;
  border: 1rem double;
  border-radius: 2rem;
  line-height: 1;
  padding-bottom: 0;
  transform: translateX(-35%) translateY(-25%) rotate(-7deg);
  text-transform: uppercase;
  font-family: 'Special Elite', cursive;
  mask-image: url('../images/grunge.png');
  mask-size: 944px 604px;
  mix-blend-mode: multiply;
  text-shadow: 10px 10px color('red', 80);
  background-color: rgba(color('red', 10), 0.75);
}

.kinda {
  color: color('green', 50);
  transform: translateX(-35%) translateY(-25%) rotate(7deg);
  text-shadow: 10px 10px color('green', 80);
  background-color: rgba(color('green', 10), 1);
  mix-blend-mode: unset;

  &[data-active] {
    opacity: 0.85 !important;
  }
}

._stage--content {
  position: relative;
}

.painted {
  min-height: 20vh;
  min-width: 30vw;
}

[data-state]:not([data-state='end']):not([data-state='intro']):not([data-state='theme']) {
  // sass-lint:disable-line force-pseudo-nesting
  color: transparent;
}

%state-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

%new-state-intro {
  text-align: center;

  h1 {
    font-size: calc(2em + 5vw);
  }

  h2 {
    font-size: calc(1.5em + 5vw);
  }

  h3 {
    font-size: calc(1em + 5vw);
  }

  h1,
  h2,
  h3 {
    text-shadow: none;
    font-weight: normal;
  }
}

@mixin new-banner($background, $color, $family, $name) {
  background: $background;
  color: $color !important;

  .font--#{$name} & {
    font-family: #{$family}, cursive;
  }

  @extend %new-state-intro;
}

.iyds {
  font-family: Bungee Shade, cursive;
  font-size: 2em;
}

[data-state='intro'],
[data-state='custom-stuff'] {
  @include new-banner($black, $grey, 'Bungee Shade', 'BungeeShade');
}

[data-state='worklets'] {
  @include new-banner($worklets, $black, 'Black Ops One', 'BlackOpsOne');
}

[data-state='typedom'] {
  @include new-banner($typed, $black, 'Nixie One', 'NixieOne');
}

[data-state='props'] {
  @include new-banner($props, $grey, 'Megrim', 'Megrim');
}

[data-state='paintapi'] {
  @include new-banner($grey, $paint, 'Finger Paint', 'FingerPaint');

  ._stage--content {
    max-width: 95vw;
  }
}

[data-state='custom-stuff'] {
  h2 {
    hyphens: unset;
  }
}

[data-state='animationapi'] {
  background-image: linear-gradient(to bottom, #67b7af, #3f988f 90%, $grey 90%);

  ._stage--content {
    max-width: 100vw;
  }
}

[data-state='bumper'] {
  color: $black !important;

  h2 a {
    background-position: 0 1.21em;
  }
}

.progress--slide {
  background-color: $black;
  border-color: $black;
  background-image: none;

  &:hover,
  &:focus {
    background-color: $grey;
  }

  &[data-active] {
    background-color: black;
  }
}

[data-state='layoutapi'] {
  background-color: $layout;
  color: $grey;
  #{'--art-alpha'}: 0.05;
  #{'--art-color'}: rgba(249, 249, 249, 0.05);
  #{'--art-steps'}: 100;
  background-image: paint(holman);
  text-align: center;
}

.paint-api {
  #{'--brush-color'}: $paint;
  align-items: center;
  display: flex;
  justify-content: center;
  background-image: paint(brushstroke);
  min-height: 5em;
  height: 50vh;
  width: 100%;
  // transform: rotate(-3.5deg);
}

.paint-api--INLINE {
  display: inline-flex;
  font-size: 0.75em;
  height: 2em;
  padding: 0.5rem 1rem;
}

.paint-api--text {
  color: $grey;
  font-weight: 400;
  line-height: 1;
  text-align: center;
  padding: 0;
  margin: 0;
  text-shadow: 4px 4px $paint, -4px -4px $paint, 4px -4px $paint, -4px 4px $paint;
  text-transform: uppercase;
  transform: rotate(-3.5deg);
  margin-top: 0.25em;

  .font--FingerPaint & {
    font-family: 'Finger Paint', cursive;
  }
}

.layout-api {
  display: layout(blueprint);
  #{'--padding'}: 5;
  #{'--offset'}: 0.25;
  font-weight: normal;
  max-width: 35ch;
  margin: 0 auto;
  color: $grey;
  font-size: calc(1em + 5vw);

  .font--Fredericka & {
    font-family: 'Fredericka the Great', cursive;
  }
}

[data-state='topic'] {
  background-color: color('purple', 10);
  color: black !important;
}

[data-state='supertopic'] {
  background-color: color('purple', 50);
  color: white !important;

  h2 {
    text-shadow: 2px 2px black, -2px 2px black;
  }
}

._stage--video {
  width: 100vw;
}

._stage--video__cover {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translateX(-50%) translateY(-50%);
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
  overflow: hidden;
  max-width: unset;
}

[data-state='magic'] {
  background-color: color('purple', 80);
}

[data-state='paint'],
[data-state='tetris'] {
  background-color: black;

  h2 {
    text-shadow: none;
  }
}

[data-state='glue'] {
  $color1: rgb(159, 168, 110);
  $color2: rgb(130, 133, 96);
  background-image: linear-gradient(to bottom, $color1, $color1 68%, $color2 74%, $color2);
}

[data-state='rad'] {
  @extend %state-cover;
  $rad: rgb(237, 254, 253);

  background-color: $rad;
  background-image: url('../images/rad.gif');
  background-size: contain;
}

[data-state='excited'],
[data-state='fireworks'],
[data-state='magic-out'] {
  background-color: $black;
}

[data-state='end'] {
  a {
    &:hover {
      font-weight: bolder;
      text-shadow: none !important; // sass-lint:disable-line no-important
    }
  }
}

.blink,
.blink-2,
.blink-3 {
  animation: blink 1s steps(5, start) infinite;
  animation-delay: 0s;
}

.blink-2 {
  animation-delay: 0.1s;
}

.blink-3 {
  animation-delay: 0.2s;
}

@keyframes blink {
  to {
    visibility: hidden;
  }
}

.strike {
  text-decoration: line-through;
}

._stage {
  &--slide {
    position: relative;
  }

  &--footnote {
    bottom: 1rem;
    font-size: 0.75em;
    left: 1rem;
    position: absolute;
  }
}

.columns {
  column-count: 2;

  li {
    break-inside: avoid;
  }
}

.full-frame {
  height: 100vh;
  width: 67vw;
}

.registered-demo::after {
  // sass-lint:disable-line force-pseudo-nesting
  content: '';
  display: inline-block;
  height: 1em;
  width: 1em;
}

.twitter {
  display: block;
  height: 100vh;
  margin: 0 auto;
  max-height: 567px;
  max-width: 360px;
  width: 67vw;
}

.windowCSS code {
  // sass-lint:disable-line class-name-format, force-pseudo-nesting, force-element-nesting
  font-size: 2rem !important; // sass-lint:disable-line no-important
}

.half {
  box-sizing: border-box;
  float: left;
  margin: 0 0.5rem;
  width: calc(50% - 0.5rem);

  &:nth-of-type(odd) {
    margin-left: 0;
  }

  &:nth-of-type(even) {
    margin-right: 0;
  }
}

pre.half {
  margin: 0.5rem 0.5rem;
}

.colored {
  color: map-get($accent, 'neutral');
}

del {
  text-decoration-color: map-get($accent, 'neutral');
  text-decoration-style: wavy;
}

.fragment.properties {
  opacity: 1;

  del {
    text-decoration-color: rgba(map-get($accent, 'neutral'), 0);
    transition: var(--sf-transition);
  }

  .reveal {
    opacity: 0;
    transition: var(--sf-transition);
    transition-delay: 0.35s;
  }

  &[data-active='true'] {
    del {
      text-decoration-color: map-get($accent, 'neutral');
    }

    .reveal {
      opacity: 1;
    }
  }
}

.bordered {
  width: 100%;
  border: solid 0;
  border-image: paint(border-colors);
  border-image-slice: var(--border-top-width) var(--border-right-width) var(--border-bottom-width) var(--border-left-width);
  border-width: calc(var(--border-top-width) * 1px) calc(var(--border-right-width) * 1px) calc(var(--border-bottom-width) * 1px) calc(var(--border-left-width) * 1px);
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 1rem;

  &--1 {
    grid-column: span 1;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  &--2 {
    grid-column: span 2;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
}

h1.center {
  text-align: center;
  font-size: 3em;
}

.content-image {
  height: 85vh;
  display: block;
  margin: 0 auto;
}

.progress--slide {
  $multiplier: 0.65;
  width: 1.25rem * $multiplier;
  height: 0.95rem * $multiplier;

  &[data-active='true'] {
    background-color: color('purple', 40);
  }
}

.layout-video {
  margin: 0 auto;
  display: block;
}

.bunny-end {
  max-height: 5em;
  margin-bottom: 1em;
}

blockquote {
  font-size: 1em;
  max-width: 40ch;
  position: relative;

  &::before {
    content: 'â€œ';
    position: absolute;
    font-size: 5em;
    top: -0.5em;
    left: -0.6em;
    color: map-get($accent, 'neutral');
  }

  footer {
    margin-top: 1em;
  }
}

rounded-tab {
  position: relative;
  z-index: 0;

  &[data-active] {
    z-index: 4;
  }
}
